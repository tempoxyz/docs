# Minting & Burning

TIP-20 tokens support dynamic supply management through minting and burning. Only addresses with the `ISSUER_ROLE` can mint tokens, and there are different ways to burn tokens depending on your needs.

## Minting Tokens

### Basic Minting

```ts
import { parseUnits } from 'viem'
// [!include ~/snippets/setup.ts:setup] 

const hash = await client.token.mint({ // [!code focus]
  amount: parseUnits('100', 6), // [!code focus]
  to: '0xdeadbeefcafebabedeadbeefcafebabedeadbeef', // [!code focus]
  token: '0x20c0000000000000000000000000000000000004', // [!code focus]
}) // [!code focus]
```

### Minting with Memo

```ts
import { keccak256, parseUnits } from 'viem'

const hash = await client.token.mint({ // [!code focus]
  amount: parseUnits('100', 6), // [!code focus]
  memo: keccak256('TREASURY_ALLOCATION_Q1_2024'), // [!code focus]
  to: '0xdeadbeefcafebabedeadbeefcafebabedeadbeef', // [!code focus]
  token: '0x20c0000000000000000000000000000000000004', // [!code focus]
}) // [!code focus]
```


## Burning Tokens

### Self-Burn

```ts
import { parseUnits } from 'viem'

const hash = await client.token.burn({ // [!code focus]
  amount: parseUnits('100', 6), // [!code focus]
  token: '0x20c0000000000000000000000000000000000004', // [!code focus]
}) // [!code focus]
```

### Burn with Memo

```ts
import { keccak256, parseUnits } from 'viem'

const hash = await client.token.burn({ // [!code focus]
  amount: parseUnits('100', 6), // [!code focus]
  memo: keccak256('BUYBACK_AND_BURN_BATCH_1'), // [!code focus]
  token: '0x20c0000000000000000000000000000000000004', // [!code focus]
}) // [!code focus]
```

### Burn from Blocked Addresses

```ts
import { parseUnits } from 'viem'

const blockedAddress = '0x810c8ed810c8ed810c8ed810c8ed810c8ed810c8' // [!code focus]

// Burn tokens from a blocked address (requires BURN_BLOCKED_ROLE) // [!code focus]
const hash = await client.token.burnBlocked({ // [!code focus]
  amount: parseUnits('100', 6), // [!code focus]
  from: blockedAddress, // [!code focus]
  token: '0x20c0000000000000000000000000000000000004', // [!code focus]
}) // [!code focus]
```

## Supply Management

### Setting Supply Caps

```ts
import { parseUnits } from 'viem'

const hash = await client.token.setSupplyCap({ // [!code focus]
  supplyCap: parseUnits('1000000', 6), // [!code focus]
  token: '0x20c0000000000000000000000000000000000004', // [!code focus]
}) // [!code focus]
```

### Checking Supply

```ts
const token = '0x20c0000000000000000000000000000000000004' // [!code focus]

const [totalSupply, supplyCap] = await Promise.all([ // [!code focus]
  client.token.getTotalSupply(token), // [!code focus]
  client.token.getSupplyCap(token), // [!code focus]
]) // [!code focus]

const isAtCap = totalSupply >= supplyCap // [!code focus]
```

## Minting Events

The token emits events for all minting and burning operations: watchTokenMint

```ts
const token = '0x20c0000000000000000000000000000000000004' // [!code focus]

await client.token.watchMint({ // [!code focus]
  token, // [!code focus]
  onMint: (args) => { // [!code focus]
    logs.forEach((log) => { // [!code focus]
      console.log(`Minted ${args.amount} to ${args.to}`) // [!code focus]
    }) // [!code focus]
  } // [!code focus]
}) // [!code focus]

await client.token.watchBurn({ // [!code focus]
  token, // [!code focus]
  onBurn: (args) => {
    logs.forEach((log) => { // [!code focus]
      console.log(`Burned ${args.amount} from ${args.from}`) // [!code focus]
    }) // [!code focus]
  } // [!code focus]
}) // [!code focus]
```

## Common Patterns

### Treasury Management

```ts
import { keccak256, parseUnits } from 'viem';

const monthlyAllocation = parseUnits('10000', 18) // [!code focus]
const memo = keccak256(`TREASURY_ALLOCATION_${new Date().toISOString().slice(0, 7)}`) // [!code focus]

const hash = await client.token.mint({  // [!code focus]
  amount: monthlyAllocation, // [!code focus]
  to: treasuryAddress, // [!code focus]
  memo, // [!code focus]
  token: '0x20c0000000000000000000000000000000000004', // [!code focus]
}) // [!code focus]
```

### Buyback and Burn

```ts
import { keccak256, parseUnits } from 'viem';

// Buyback and burn mechanism // [!code focus]
const buybackAmount = parseUnits('5000', 18) // [!code focus]

// First burn the tokens // [!code focus]
const hash = await client.token.burn({ // [!code focus]
  amount: buybackAmount, // [!code focus]
  memo: keccak256(`BUYBACK_${Date.now()}`), // [!code focus]
  token: '0x20c0000000000000000000000000000000000004', // [!code focus]
}) // [!code focus]

// Then update total supply tracking // [!code focus]
console.log(`Burned ${buybackAmount} tokens in buyback program`) // [!code focus]
```

### Airdrop Distribution

```ts
import { keccak256, parseUnits } from 'viem';

const airdropList = [ // [!code focus]
  { // [!code focus]
    address: '0xdeadbeefcafebabedeadbeefcafebabedeadbeef', // [!code focus]
    amount: parseUnits('100', 18), // [!code focus]
  }, // [!code focus]
  { // [!code focus]
    address: '0xdeadbeefcafebabedeadbeefcafebabedeadbeef', // [!code focus]
    amount: parseUnits('200', 18), // [!code focus]
  }, // [!code focus]
] // [!code focus]

for (const { amount, address } of airdropList) { // [!code focus]
  const memo = keccak256(`AIRDROP_BATCH_1_${address}`) // [!code focus]
  await client.token.mint({ // [!code focus]
    amount: amount, // [!code focus]
    memo, // [!code focus]
    to: address, // [!code focus]
    token: '0x20c0000000000000000000000000000000000004', // [!code focus]
  }) // [!code focus]
}
```

## Supply Cap Considerations

### Setting Appropriate Caps

```ts
import { parseUnits } from 'viem';

// For a stablecoin, set a reasonable cap // [!code focus]
const maxSupply = parseUnits('1000000000', 18) // 1 billion tokens
await client.token.setSupplyCap({ // [!code focus]
  supplyCap: maxSupply, // [!code focus]
  token: '0x20c0000000000000000000000000000000000004', // [!code focus]
}) // [!code focus]
```

## Security Considerations

- **Role Management**: Only grant ISSUER_ROLE to trusted addresses
- **Supply Caps**: Set appropriate limits to prevent runaway inflation
- **Memo Tracking**: Use memos to track the purpose of minting/burning
- **Regular Audits**: Monitor supply changes and ensure they align with your tokenomics

For detailed technical specifications, see the [TIP-20 Protocol Reference](/protocol/tokens/tip-20).
