# Block Format

## Abstract

This specification defines the structure of valid blocks in the Tempo blockchain.

## Motivation

Tempo blocks extend the Ethereum block format in multiple ways: there are new header fields to account for payment lanes and sub-blocks, and system transactions are added to the block body for the fee AMM and other protocol operations. This specification contains all the modifications to the block format.

## Specification

### Header fields
Tempo extends an Ethereum header with three extra scalars.
```rust title="Header struct"
pub struct Header {
    pub general_gas_limit: u64,
    pub shared_gas_limit: u64,
    pub timestamp_millis_part: u64,
    pub inner: Header,
}
pub struct Header {
    pub general_gas_limit: u64,
    pub sub_block_gas_limit: u64,
    pub inner: Header,
}
```
- `inner` is the canonical Ethereum header (parent_hash, state_root, gas_limit, etc.).
- `general_gas_limit` and `shared_gas_limit` carve up the canonical `gas_limit` for payment and sub-block gas.
- `timestamp_millis_part` stores the sub‑second component; the full timestamp is `inner.timestamp * 1000 + timestamp_millis_part` .

### Block body
The block body in Tempo retains the canonical Ethereum block body structure, with the addition of new system transactions (see below). These transactions include sub-block transactions as the bottom non-system transactions in the block. 

### System transactions

A valid tempo block must contain the following new system transactions
  - **Rewards Registry (optional top-of-block)** — refreshes validator rewards metadata before user transactions begin.  Detailed specification [here](/protocol/tokens/reward-distribution).
 - **Fee Manager (end-of-block 1/3)** — settles block fee accounting to keep validator payouts and protocol budgets consistent.  Detailed specification [here](/protocol/transactions/fee-amm).
 - **Stablecoin Exchange (end-of-block 2/3)** — settles stablecoin exchange balances. Detailed specification [here](/protocol/stablecoin-exchange/stablecoin-exchange).
 - **Subblock Metadata (end-of-block 3/3)** — contains metadata about the sub-blocks included in the block. Detailed specification [here](/protocol/consensus-blockspace/subblocks).  




## Related Specifications
- [Payment Lanes](/protocol/consensus-blockspace/payment-lanes) - Transaction ordering
- [Sub-blocks](/protocol/consensus-blockspace/subblocks) - Block organization
