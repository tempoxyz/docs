# Payment Lanes

## Abstract

Introduces a second consensus gas constraint for **non-payment** transactions. A new field-`general_gas_limit`-is added to the header. Transactions are classified as either payments or non-payments based solely on their transaction data, without requiring any access to blockchain state. For a block to be valid, total `gas_used` must be less than the `gas_limit` **and** the gas used by non-payment transactions must be less than `general_gas_limit`. 


## Motivation

Preserve throughput and predictable inclusion for simple payments under heavy non-payment demand without changing.


## Terminology

- **Payment transaction:** Determined by a function, `is_payment(tx) -> bool`.  This function returns true if the transaction is a payment transaction, false otherwise.


## Specification

### 1. Transaction classification 

A transaction is classified as a **payment transaction** when:

  1.  the recipient address (`tx.to`) matches the TIP-20 token pattern: `0x20c0000000000000000000000000<TOKEN_ID>`, or,
  2. for AA transactions, if every item in `tx.calls` is a CALL to an address with the TIP-20 token pattern `0x20c0000000000000000000000000<TOKEN_ID>`.


### 2. Custom Block header fields 

Adds a new limit, `general_gas_limit` as a custom field in the header. The total amount of gas used by non-payment transactions in the block must be smaller than `general_gas_limit`. 


### 3. Ordering of Transactions

The specification does not require any specific ordering of transactions: payment and non-payment transactions can be intermixed.


## Related

- [Sub-blocks](/protocol/consensus-blockspace/subblocks) - Block organization
- [Fees](/protocol/fees/fees) - Fee payment system
