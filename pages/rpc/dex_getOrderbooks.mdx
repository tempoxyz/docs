# `dex_getOrderbooks`

## Overview

Gets paginated orderbooks from the [Stablecoin Exchange](/documentation/exchange) on Tempo.

Uses cursor-based pagination for stable iteration through orderbooks.

## Request

```ts
type Request = {
  method: 'dex_getOrderbooks'
  params: [{
    /** 
     * Cursor for pagination (based on bookKey). 
     * 
     * Defaults to first entry based on the filter configuration.
     * Use the `nextCursor` in response to get the next set of orderbooks.
     */
    cursor?: string
    /** Filter configuration. */
    filters?: {
      /** Filter by base token address */
      baseToken?: Address
      /** Best ask tick in range */
      bestAskTick?: [min: number | null, max: number | null]
      /** Best bid tick in range */
      bestBidTick?: [min: number | null, max: number | null]
      /** Filter by quote token address */
      quoteToken?: Address
      /** Spread in range (in ticks) */
      spread?: [min: number | null, max: number | null]
    }
    /** 
     * Maximum number of orderbooks to return.
     * 
     * Defaults to 10.
     * Maximum is 100.
     */
    limit?: number
  }]
}
```

## Response

```ts
type Response = {
  /** Cursor for next page, null if no more results */
  nextCursor: string | null
  /** Array of orderbooks matching the query */
  orderbooks: Orderbook[]
}

type Orderbook = {
  /** Base token address */
  baseToken: Address
  /** Orderbook key (keccak256 of base and quote tokens) */
  bookKey: Hex
  /** Best ask tick (lowest ask price) */
  bestAskTick: number
  /** Best bid tick (highest bid price) */
  bestBidTick: number
  /** Quote token address */
  quoteToken: Address
  /** Spread in ticks (bestAskTick - bestBidTick) */
  spread: number
}
```

## Examples

### Basic pagination

```ts twoslash
// @noErrors

// First page
const response = await provider.request({
  method: 'dex_getOrderbooks',
  params: [{
    limit: 100
  }]
})
// @log: { nextCursor: '0xabc...',orderbooks: [{ bookKey: '0x...',baseToken: '0x20c0000000000000000000000000000000000001',quoteToken: '0x20c0000000000000000000000000000000000000',bestBidTick: 50,bestAskTick: 55,spread: 5 }] }

// Next page
const nextResponse = await provider.request({
  method: 'dex_getOrderbooks',
  params: [{
    cursor: response.nextCursor,
    limit: 100
  }]
})
// @log: { nextCursor: null,orderbooks: [{ bookKey: '0x...',baseToken: '0x20c0000000000000000000000000000000000002',quoteToken: '0x20c0000000000000000000000000000000000000',bestBidTick: -10,bestAskTick: 10,spread: 20 }] }
```

### Filter by base token

```ts twoslash
// @noErrors
const response = await provider.request({
  method: 'dex_getOrderbooks',
  params: [{
    filters: {
      baseToken: '0x20c0000000000000000000000000000000000001'
    },
    limit: 10
  }]
})
// @log: { nextCursor: null,orderbooks: [{ bookKey: '0x...',baseToken: '0x20c0000000000000000000000000000000000001',quoteToken: '0x20c0000000000000000000000000000000000000',bestBidTick: 50,bestAskTick: 55,spread: 5 }] }
```

### Filter by trading pair

```ts twoslash
// @noErrors
const response = await provider.request({
  method: 'dex_getOrderbooks',
  params: [{
    filters: {
      baseToken: '0x20c0000000000000000000000000000000000001',
      quoteToken: '0x20c0000000000000000000000000000000000000'  // linkingUSD
    },
    limit: 1
  }]
})
// @log: { nextCursor: null,orderbooks: [{ bookKey: '0x...',baseToken: '0x20c0000000000000000000000000000000000001',quoteToken: '0x20c0000000000000000000000000000000000000',bestBidTick: 50,bestAskTick: 55,spread: 5 }] }
```

### Filter by spread

```ts twoslash
// @noErrors
// Find orderbooks with spreads less than 10 ticks
const response = await provider.request({
  method: 'dex_getOrderbooks',
  params: [{
    filters: {
      spread: [null, 10]  // Maximum spread of 10 ticks
    },
    limit: 50
  }]
})
// @log: { nextCursor: null,orderbooks: [{ bookKey: '0x...',baseToken: '0x20c0000000000000000000000000000000000001',quoteToken: '0x20c0000000000000000000000000000000000000',bestBidTick: 0,bestAskTick: 1,spread: 1 }] }
```
