# `token_getTokensByAddress`

## Overview

Gets paginated [TIP-20 tokens](/documentation/tokens) associated with an account address on Tempo. 

Returns tokens where the account has a balance or specific roles.

Uses cursor-based pagination for stable iteration through tokens.

## Request

```ts
type Request = {
  method: 'token_getTokensByAddress'
  params: [{
    /** Account address to query tokens for */
    address: Address
    /** 
     * Cursor for pagination. Based on tokenId.
     * 
     * Defaults to first entry based on the sort and filter configuration.
     * Use the `nextCursor` in response to get the next set of tokens.
     */
    cursor?: string
    /** Filter configuration. */
    filters?: {
      /** Filter by balance in range */
      balance?: [min: Hex | null, max: Hex | null]
      /** Filter by currency code (e.g., "USD", "EUR", "JPY") */
      currency?: string
      /** Created timestamp (seconds) in range */
      createdAt?: [min: number | null, max: number | null]
      /** Filter by token name (case-insensitive) */
      name?: string
      /** Filter by pause state */
      paused?: boolean
      /** Filter by quote token address */
      quoteToken?: Address
      /** Filter by roles (32-byte hex value) */
      roles?: Hex[]
      /** Supply cap in range */
      supplyCap?: [min: Hex | null, max: Hex | null]
      /** Filter by symbol */
      symbol?: string
      /** Total supply in range */
      totalSupply?: [min: Hex | null, max: Hex | null]
    }
    /** 
     * Maximum number of tokens to return.
     * 
     * Defaults to 10.
     * Maximum is 100.
     */
    limit?: number
    /** Sorting configuration */
    sort?: {
      /** Field to sort by (e.g., 'tokenId', 'createdAt', 'totalSupply', 'name', 'symbol', 'balance') */
      on: string
      /** Sort direction */
      order: 'asc' | 'desc'
    }
  }]
}
```

## Response

```ts
type Response = {
  /** Cursor for next page, null if no more results */
  nextCursor: string | null
  /** Array of tokens matching the query */
  tokens: AccountToken[]
}

type AccountToken = {
  /** Account's balance in this token */
  balance: Hex
  /** Roles the account has for this token */
  roles: Hex[]
  /** Token details */
  token: Token
}
```

:::tip

See [`Token` type](/rpc/token_getTokens#response) for the full token details.

:::

## Examples

### Get all tokens with balance

```ts twoslash
// @noErrors

const response = await provider.request({
  method: 'token_getTokensByAddress',
  params: [{
    address: '0x1234567890123456789012345678901234567890',
    limit: 100
  }]
})
// @log: { nextCursor: null,tokens: [{ balance: '0x152d02c7e14af6800000', roles: ['0xdeadbeefdeadbeefdeadbeefdeadbeefdeadbeefdeadbeefdeadbeefdeadbeef'], token: { address: '0x20c0000000000000000000000000000000000001',createdAt: 1730000000,currency: 'USD',decimals: 6,name: 'Alpha USD',symbol: 'AlphaUSD',tokenId: '0x1', ... }] }
```

### Filter by minimum balance

```ts twoslash
// @noErrors
const response = await provider.request({
  method: 'token_getTokensByAddress',
  params: [{
    address: '0x1234567890123456789012345678901234567890',
    filters: {
      balance: ['0xde0b6b3a7640000', null],  // Minimum 1 token (assuming 18 decimals)
      currency: 'USD'
    },
    limit: 50
  }]
})
// @log: { nextCursor: null, tokens: [{ balance: '0x152d02c7e14af6800000', roles: [], token: { address: '0x20c0000000000000000000000000000000000001',createdAt: 1730000000,currency: 'USD',decimals: 6,name: 'Alpha USD',symbol: 'AlphaUSD',... }] }
```

### Sort by balance (descending)

```ts twoslash
// @noErrors
const response = await provider.request({
  method: 'token_getTokensByAddress',
  params: [{
    address: '0x1234567890123456789012345678901234567890',
    limit: 20,
    sort: {
      on: 'balance',
      order: 'desc'
    }
  }]
})
// @log: { nextCursor: null, tokens: [{ balance: '0x52b7d2dcc80cd2e4000000', roles: [], token: { address: '0x20c0000000000000000000000000000000000005',createdAt: 1730005000,currency: 'USD',decimals: 6,name: 'Mega USD',symbol: 'MUSD',... }] }
```

### Filter by currency and quote token

```ts twoslash
// @noErrors
const response = await provider.request({
  method: 'token_getTokensByAddress',
  params: [{
    address: '0x1234567890123456789012345678901234567890',
    filters: {
      currency: 'USD',
      quoteToken: '0x20c0000000000000000000000000000000000000'  // quoteUSD
    },
    limit: 50
  }]
})
// @log: { nextCursor: null, tokens: [{ balance: '0x152d02c7e14af6800000', roles: [], token: { address: '0x20c0000000000000000000000000000000000001',createdAt: 1730000000,currency: 'USD',decimals: 6,name: 'Alpha USD',symbol: 'AlphaUSD',... }] }
```

### Search by currency

```ts twoslash
// @noErrors
const response = await provider.request({
  method: 'token_getTokensByAddress',
  params: [{
    address: '0x1234567890123456789012345678901234567890',
    filters: {
      currency: 'USD'  // Contains "USD"
    },
    limit: 50,
    sort: {
      on: 'name',
      order: 'asc'
    }
  }]
})
// @log: { nextCursor: null, tokens: [{ balance: '0x152d02c7e14af6800000', roles: [], token: { address: '0x20c0000000000000000000000000000000000001',createdAt: 1730000000,currency: 'USD',decimals: 6,name: 'Alpha USD',symbol: 'AlphaUSD',... }] }
```
