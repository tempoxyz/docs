# `policy_getAddresses`

## Overview

Gets paginated addresses in a [transfer policy](/documentation/tokens/transfer-policies) on Tempo.

Returns addresses that are authorized or restricted based on the policy type (whitelist or blacklist).

Uses cursor-based pagination for stable iteration through addresses.

## Request

```ts
type Request = {
  method: 'policy_getAddresses'
  params: [{
    /** Policy ID to query addresses for */
    policyId: Hex
    /** 
     * Cursor for pagination (based on address). 
     * 
     * Defaults to first entry based on the sort and filter configuration.
     * Use the `nextCursor` in response to get the next set of addresses.
     */
    cursor?: string
    /** Filter configuration. */
    filters?: {
      /** Filter by authorization status (true = authorized, false = not authorized) */
      authorized?: boolean
    }
    /** 
     * Maximum number of addresses to return.
     * 
     * Defaults to 10.
     * Maximum is 100.
     */
    limit?: number
    /** Sorting configuration */
    sort?: {
      /** Field to sort by (e.g., 'address') */
      on: string
      /** Sort direction */
      order: 'asc' | 'desc'
    }
  }]
}
```

## Response

```ts
type Response = {
  /** Array of addresses in the policy */
  addresses: PolicyAddress[]
  /** Cursor for next page, null if no more results */
  nextCursor: string | null
}

type PolicyAddress = {
  /** Address in the policy */
  address: Address
  /** Whether address is authorized (depends on policy type) */
  authorized: boolean
}
```

## Examples

### Get all authorized addresses

```ts twoslash
// @noErrors
const response = await provider.request({
  method: 'policy_getAddresses',
  params: [{
    policyId: '0x5',
    filters: {
      authorized: true  // Only authorized addresses
    },
    limit: 100
  }]
})
// @log: {
// @log:   addresses: [
// @log:     { address: '0x1234567890123456789012345678901234567890', authorized: true },
// @log:     { address: '0xabcdef1234567890123456789012345678901234', authorized: true },
// @log:     { address: '0x5678901234567890123456789012345678901234', authorized: true },
// @log:     ...
// @log:   ],
// @log:   nextCursor: null
// @log: }
```

### Get blacklisted addresses

```ts twoslash
// @noErrors
// For a blacklist policy, authorized: false means restricted
const response = await provider.request({
  method: 'policy_getAddresses',
  params: [{
    policyId: '0x8',
    filters: {
      authorized: false  // Blacklisted addresses
    },
    limit: 100
  }]
})
// @log: { addresses: [{ address: '0x5678...', authorized: false }, { address: '0x9abc...', authorized: false }, { address: '0xdef0...', authorized: false }], nextCursor: null }
```

### Get all addresses (authorized and unauthorized)

```ts twoslash
// @noErrors
const response = await provider.request({
  method: 'policy_getAddresses',
  params: [{
    policyId: '0x5',
    limit: 100
  }]
})
// @log: { addresses: [{ address: '0x1234...', authorized: true }, { address: '0x5678...', authorized: true }, { address: '0x9abc...', authorized: false }, { address: '0xdef0...', authorized: true }], nextCursor: null }
```

### Pagination through large whitelists

```ts twoslash
// @noErrors
// First page
const response = await provider.request({
  method: 'policy_getAddresses',
  params: [{
    policyId: '0x5',
    filters: {
      authorized: true  // Only whitelisted addresses
    },
    limit: 100,
    sort: {
      on: 'address',
      order: 'asc'
    }
  }]
})
// @log: { addresses: [{ address: '0x0001...', authorized: true }, { address: '0x0002...', authorized: true }, { address: '0x0003...', authorized: true }, ...], nextCursor: '0x9999...' }

// Next page
const nextResponse = await provider.request({
  method: 'policy_getAddresses',
  params: [{
    policyId: '0x5',
    cursor: response.nextCursor,
    filters: {
      authorized: true
    },
    limit: 100,
    sort: {
      on: 'address',
      order: 'asc'
    }
  }]
})
// @log: { addresses: [{ address: '0x9aaa...', authorized: true }, { address: '0x9bbb...', authorized: true }, { address: '0x9ccc...', authorized: true }, ...], nextCursor: null }
```
