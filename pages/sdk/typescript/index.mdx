import * as Card from "../../../components/Card.tsx"

# Getting Started

Tempo distributes a TypeScript SDK for:
- [Wagmi](https://wagmi.sh): React Hooks (and reactive primitives) for EVM blockchains
- [Viem](https://viem.sh): TypeScript interface for EVM blockchains

The Tempo extensions can be used to perform common operations with the chain, such as: 
 querying the chain, sending Tempo transactions, managing tokens & their AMM pools, and more.

<Card.Container>
  <Card.Link
    description="Set up your Wagmi configuration with Tempo"
    href="#wagmi-setup"
    icon={() => 
      <img className="size-4.5 not-dark:invert" src="https://wagmi.sh/favicon.svg" alt="Wagmi" />
    }
    title="Wagmi Setup"
  />
  <Card.Link
    description="Set up a Viem client to interact with Tempo"
    href="#viem-setup"
    icon={() => (
      <>
        <img className="size-4.5 dark:hidden" src="https://viem.sh/icon-light.png" alt="Viem" />
        <img className="size-4.5 not-dark:hidden" src="https://viem.sh/icon-dark.png" alt="Viem" />
      </>
    )}
    title="Viem Setup"
  />
</Card.Container>

:::tip

**When should I use Wagmi vs. Viem?**

- **Wagmi** is best suited for **applications & wallets** – a high-level and stateful interface for the EVM (React Hooks, Vanilla JS, etc)
- **Viem** is best suited for **libraries, tooling, servers, scripting, etc** – a low-level and stateless interface for the EVM

:::

## Wagmi Setup

::::steps

### Install

To add Wagmi to your project, install the required packages:

:::code-group

```bash [npm]
npm i tempo.ts wagmi viem @tanstack/react-query
```

```bash [pnpm]
pnpm i tempo.ts wagmi viem @tanstack/react-query
```

:::

- [Viem](https://viem.sh) is a TypeScript interface for the EVM that performs blockchain operations.
- [TanStack Query](https://tanstack.com/query/v5) is an async state manager that handles requests, caching, and more.

### Create Config

Create and export a new Wagmi config using `createConfig`.

```tsx twoslash
// @noErrors
// [!include ~/snippets/wagmi.config.ts:setup]
```

In this example, Wagmi is configured to use the Tempo chain and `webAuthn` connector to enable Passkeys. Check out the [`createConfig` docs](https://wagmi.sh/react/api/createConfig) for more configuration options.

### Wrap App in Context Provider

Wrap your app in the `WagmiProvider` React Context Provider and pass the `config` you created earlier to the `config` property.

:::code-group

```tsx [app.tsx]
import { WagmiProvider } from 'wagmi' // [!code focus]
import { config } from './config' // [!code focus]

function App() {
  return (
    <WagmiProvider config={config}> {/* [!code focus] */}
      {/** ... */}
    </WagmiProvider> // [!code focus] 
  )
}
```

```tsx [config.ts]
// [!include ~/snippets/wagmi.config.ts:setup]
```

:::

Check out the [`WagmiProvider` docs](https://wagmi.sh/react/api/WagmiProvider) to learn more about React Context in Wagmi.

### Setup TanStack Query

Inside the `WagmiProvider`, wrap your app in a TanStack Query React Context Provider, e.g. `QueryClientProvider`, and pass a new `QueryClient` instance to the `client` property.

:::code-group

```tsx [app.tsx]
import { QueryClient, QueryClientProvider } from '@tanstack/react-query' // [!code focus]
import { WagmiProvider } from 'wagmi'
import { config } from './config'

const queryClient = new QueryClient() // [!code focus]

function App() {
  return (
    <WagmiProvider config={config}>
      <QueryClientProvider client={queryClient}> {/* [!code focus] */}
        {/** ... */} 
      </QueryClientProvider> {/* [!code focus] */}
    </WagmiProvider>
  )
}
```

```tsx [config.ts]
// [!include ~/snippets/wagmi.config.ts:setup]
```

:::

Check out the [TanStack Query docs](https://tanstack.com/query/latest/docs/framework/react/overview) to learn about the library, APIs, and more.

### Use Wagmi

Now that everything is set up, every component inside the Wagmi and TanStack Query Providers can use Wagmi React Hooks.

:::code-group

```tsx [balance.tsx]
import { useAccount } from 'wagmi'
import { Hooks } from 'tempo.ts/wagmi'

export function FeeTokenBalance() {
  const { address } = useAccount()

  const { data: userToken } = Hooks.fee.useUserToken({ account: address })
  const { data: balance, ...balanceQuery } = Hooks.token.useGetBalance({ 
    account: address, 
    token: userToken?.address 
  })
  const { data: metadata, ...metadataQuery } = Hooks.token.useGetMetadata({ 
    token: userToken?.address 
  })

  if (balanceQuery.status === 'error' || metadataQuery.status === 'error')
    return <div>Error fetching balance: {balance.error.message}</div>
  if (!balance || !metadata) return <div>Loading balance...</div>
  return (
    <div>
      Fee Token Balance: 
      {formatUnits(balance, metadata.decimals)} {metadata.symbol}
    </div>
  )
}
```

```tsx [app.tsx]
import { QueryClient, QueryClientProvider } from '@tanstack/react-query'
import { WagmiProvider } from 'wagmi'
import { config } from './config'
import { Profile } from './profile'

const queryClient = new QueryClient()

function App() {
  return (
    <WagmiProvider config={config}>
      <QueryClientProvider client={queryClient}>
        <Profile />
      </QueryClientProvider>
    </WagmiProvider>
  )
}
```

```tsx [config.ts]
// [!include ~/snippets/wagmi.config.ts:setup]
```

:::

### Next Steps

After you have set up your Tempo with Wagmi, you can now:

- Follow a guide on how to [create and manage tokens](#TODO), [interact with the enshrined Stablecoin Exchange](#TODO), [sponsor transactions](#TODO), and [more](#TODO).
- Use the [suite of Tempo Hooks](/sdk/typescript/wagmi#hooks)

::::

## Viem Setup

::::steps

### Install

To install the Tempo extension, you will need to install [Viem](https://viem.sh) and Tempo:

:::code-group

```bash [npm]
npm i tempo.ts viem tempo.ts
```

```bash [pnpm]
pnpm i tempo.ts viem
```

:::

### Configure

Next, we will configure a [Viem Client](https://viem.sh/docs/clients/custom).

```ts twoslash [viem.config.ts]
// [!include ~/snippets/viem.config.ts:setup]
```

### Use Actions

Now you're ready to [start interacting](/sdk/typescript/viem) with Tempo!

:::code-group

```ts twoslash [example.ts]
import { formatUnits } from 'viem'
import { client } from './viem.config'

const address = '0x742d35Cc6634C0532925a3b844Bc9e7595f0bEbb'

const userToken = await client.fee.getUserToken({ address })
const balance = await client.token.getBalance({ 
  account: address, 
  token: userToken.address 
})
const metadata = await client.token.getMetadata({ 
  token: userToken.address 
})

console.log(
  'Fee Token Balance:', 
  formatUnits(balance, metadata.decimals), 
  metadata.symbol
)
// @log: Fee Token Balance: 10.5 aUSD
```

```ts twoslash [viem.config.ts] filename="viem.config.ts"
// [!include ~/snippets/viem.config.ts:setup]
```

:::

:::tip

[See all Tempo Actions](/sdk/typescript/viem)

:::

### Next Steps

After you have set up Tempo with Viem, you can now:

- Follow a guide on how to [create and manage tokens](#TODO), [interact with the enshrined Stablecoin Exchange](#TODO), [sponsor transactions](#TODO), and [more](#TODO).
- Use the [suite of Tempo Actions](/sdk/typescript/viem)

::::
