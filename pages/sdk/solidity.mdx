# Solidity

Set up your development environment and deploy contracts to Tempo.

## Install Foundry

Tempo uses a custom fork of Foundry that supports protocol-level features like custom precompiles, new transaction types, and native account abstraction.

:::warning
Use Tempo's Foundry fork for compatibility. Standard Foundry won't work with Tempo-specific features.
:::

### Prerequisites

```bash
curl -L https://foundry.paradigm.xyz | bash
foundryup
```

### Install Tempo Foundry

Run the following command to install the Tempo fork of Foundry:

```bash
foundryup -n tempo
```

This will install the latest `nightly` release of the Tempo fork.

To install a specific version, replace `<TAG_NAME>` with the desired release tag:

```bash
foundryup -n tempo -i <TAG_NAME>
```

#### Verify Installation

```bash
forge --version
cast --version
```

You should see version information include `-tempo`, indicating you are using the Tempo fork.

## Set Up Your Project

### Option A: New Project

Initialize a new project with Tempo support:

```bash
forge init -n tempo my-project && cd my-project
```

This creates a new directory `my-project` with a basic project structure configured for Tempo.

```text
.
├── foundry.lock
├── foundry.toml
├── lib
│   ├── forge-std
│   └── tempo-std
├── README.md
├── script
│   └── Mail.s.sol
├── src
│   └── Mail.sol
└── test
    └── Mail.t.sol
```

### Option B: Existing Project

Add Foundry to an existing project:

```toml [foundry.toml]
[profile.default]
src = "src"
out = "out"
libs = ["lib"]
```

Install Tempo standard library:

```bash
forge install tempoxyz/tempo-std
```

## Configure Foundry for Tempo

Optionally, set up environment variables:

```bash
export TEMPO_RPC_URL=https://rpc.testnet.tempo.xyz
```

Add to your `foundry.toml`:

```toml [foundry.toml]
[rpc_endpoints]
tempo_testnet = "https://rpc.testnet.tempo.xyz"
```

## Build and Test

Build your contracts:

```bash
forge build
```

Run tests:

```bash
forge test
```

Run all tests with Tempo testnet fork:

```bash
forge test --fork-url https://rpc.testnet.tempo.xyz
```

:::info
It is recommended to selectively use `vm.createSelectFork("https://rpc.testnet.tempo.xyz")` in your integration tests.
:::

## Deploy Your Contract

:::info
This assumes you have set up your repo with `forge init --tempo` as shown above.
:::

### Using `forge create`

Deploy a simple contract:

```bash
forge create src/Mail.sol:Mail \
  --rpc-url https://rpc.testnet.tempo.xyz \
  --interactive \
  --broadcast
```

Deploy with constructor arguments:

```bash
forge create src/Mail.sol:Mail \
  --rpc-url https://rpc.testnet.tempo.xyz \
  --interactive \
  --broadcast \
  --constructor-args <ARGUMENTS>
```

### Using `forge script`

Run a deployment script:

```bash
forge script script/Mail.s.sol \
  --rpc-url https://rpc.testnet.tempo.xyz \
  --interactive \
  --broadcast
```

## Verify Your Contract

Check that your contract is deployed:

```bash
cast code <CONTRACT_ADDRESS> --rpc-url https://rpc.testnet.tempo.xyz
```

Interact with your contract:

```bash
cast call <CONTRACT_ADDRESS> "myFunction()(uint256)" \
  --rpc-url https://rpc.testnet.tempo.xyz
```

Send a transaction:

```bash
cast send <CONTRACT_ADDRESS> "myFunction(uint256)" 42 \
  --rpc-url https://rpc.testnet.tempo.xyz \
  --interactive
```

Replay a transaction by hash:

```bash
cast run <TX_HASH> \
  --rpc-url https://rpc.testnet.tempo.xyz
```