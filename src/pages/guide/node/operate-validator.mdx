---
title: Operate your validator node
description: Day-to-day operations for Tempo validators. Node lifecycle, upgrades, key rotation, monitoring, and troubleshooting.
---

# Operate your validator

This guide covers day-to-day operations for running a Tempo validator in production.

## Node Lifecycle

### Starting and Stopping

Use `SIGINT` (Ctrl+C) or `SIGTERM` to gracefully stop the node:

```bash
# If running directly
kill -INT <pid>

# If running via systemd
sudo systemctl stop tempo
```

The node will finish processing the current block before shutting down. Avoid using `SIGKILL` as it may corrupt the database.

### Resetting your validator's data

Validators can safely restart from a snapshot if needed:

```bash
# Stop the node
sudo systemctl stop tempo

# Remove old data (keep your signing key!)
rm -rf <datadir>/db

# Download fresh snapshot
tempo download --datadir <datadir>

# Start the node
sudo systemctl start tempo
```

After restarting, your validator will rejoin the active set once it syncs to the chain tip and participates in the next DKG ceremony (up to 3 hours).
Your node needs to wait for the next DKG ceremony to receive its' signing share.

### Changing your validator's instance

If needed, you can also migrate your validator to another instance (e.g. move to another bare-metal server). 
This requires shutting down your old node, downloading a snapshot and starting with the consensus key.

The new validator needs to have the same IP address and port as the old one, since the Tempo validator contract does not currently support updating the IP address.

Since your validator is starting from fresh state, you will need to wait for the next DKG ceremony for your validator to receive a signing share (up to 3 hours).

## Key Management

### Signing Key Rotation

To rotate your validator's signing key:

1. Generate a new keypair:

```bash
tempo consensus generate-private-key --output <new-key-path>
tempo consensus calculate-public-key --private-key <new-key-path>
```

2. Contact the Tempo team to update your validator's public key on-chain

3. Once confirmed, update your node configuration to use the new key and restart

:::warning
The old validator identity must be deactivated before the new one is activated
:::

### Signing Share Recovery

If you lose your signing share (stored on the database in `<datadir>/consensus/`), your validator will automatically receive a new share at the next DKG ceremony. This takes up to 3 hours depending on the epoch stage.

## Log Management

### Parsing Logs

Tempo logs include ANSI escape codes for colors. To strip them for grep/awk:

```bash
# Strip colors when searching
sudo journalctl -u tempo | sed 's/\x1b\[[0-9;]*m//g' | grep "error"

# Or disable colors at runtime
RUST_LOG_STYLE=never tempo node ...
```

### Log Levels

Control verbosity with `RUST_LOG`:

```bash
# Default (info)
RUST_LOG=info

# Debug consensus only
RUST_LOG=info,tempo_commonware_node::consensus=debug

# Quiet mode (warnings and errors only)
RUST_LOG=warn
```

## Metrics glossary

This is a table of the most important metrics to watch on your validator node:

| Metric Name | Description | When to alert? | Meaning |
| --- | --- | --- | --- |
| `consensus_engine_dkg_manager_ceremony_successes_total` | Number of successful DKG ceremonies | Critical when it hasn't increased in 12 hours | Your node has participated in a successful DKG ceremony |
| `consensus_engine_dkg_manager_ceremony_failures_total` | Number of failed DKG ceremonies | Warning when it increases | Your node has failed to participate in a DKG ceremony |
| `consensus_engine_marshal_finalized_height` | Latest finalized height your node is aware of | Warning when it hasn't increased in 1 hour, critical when it hasn't increased in 3 hours | Your node is aware of the latest finalized height |
| `consensus_engine_marshal_processed_height` | Latest height your node has processed | Critical when it hasn't increased in an hour, warning when it's behind finalized height | Your node is processing blocks |
| `consensus_network_spawner_connections` | Number of active peers on the consensus layer | Warning when it's below the expected validator count, critical when it's 0 | Your node is connected to the consensus layer |
| `consensus_engine_consensus_voter_inbound_messages_total` | Number of inbound messages related to voting on the consensus layer | Warning when it's not increasing and your node is synced | Your node is receiving voting messages from the consensus layer |
| `reth_sync_checkpoint` | Current sync progress | Warning on when there are no changes in the `Finish` stage | Your node is syncing with the network |
| `reth_payloads_resolved_block` | Number of built and resolved payloads | Warning when it hasn't increased in 12 hours | Your node has built and resolved blocks |

## Troubleshooting

### Node stalled at specific height

If your node stops syncing at a specific block:

1. Check if other validators are also stuck (e.g. on the [Tempo Explorer](https://explore.tempo.xyz))
2. Check for errors in logs:
   ```bash
   sudo journalctl -u tempo -n 5000 | grep -i "error\|panic\|fatal"
   ```
3. Try restarting from snapshot if the issue persists

### Not receiving signing share

If `consensus_engine_dkg_manager_ceremony_successes_total` stays at 0 after 6-12 hours:

1. Verify your IP is whitelisted correctly
2. Check firewall allows inbound/outbound on port 30303
3. Confirm your node is synced and connected to consensus peers
4. Wait for the next DKG ceremony (runs every ~3 hours)
